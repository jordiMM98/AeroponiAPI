<!DOCTYPE html>
<html lang="es">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	
	
	<title>Registro de usuarios  </title>
	<link rel="shortcut icon" href="../imagen/listo.png" type="image/png">
	<link rel="stylesheet" media="screen" href="http://fonts.googleapis.com/css?family=Open+Sans:300,400,700">
	<link rel="stylesheet" href="../assets/css/bootstrap.min.css">
	<link rel="stylesheet" href="../assets/css/font-awesome.min.css">
	<!-- Custom styles for our template -->
	<link rel="stylesheet" href="../assets/css/bootstrap-theme.css" media="screen">
	<link rel="stylesheet" type="text/css" href="../assets/css/isotope.css" media="screen" />
	<link rel="stylesheet" href="../assets/js/fancybox/jquery.fancybox.css" type="text/css" media="screen" />
	<link rel="stylesheet" href="../assets/css/style.css">
	<link rel="stylesheet" href="../HTML/eyes.css">





	<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" ></script>
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.min.js" integrity="sha384-w1Q4orYjBQndcko6MimVbzY0tgp4pWB4lZ7lr30WKz0vr/aWKhXdBNmNb5D92v7s" crossorigin="anonymous"></script>
	<!--font awesome con CDN-->  
	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.2/css/all.css" integrity="sha384-oS3vJWv+0UjzBfQzYUhtDYW+Pj2yciDJxpsK1OYPAYjqT085Qq/1cq5FLXAZQ7Ay" crossorigin="anonymous">  
	

	<script src="https://code.jquery.com/jquery-3.5.1.js"></script>
	


	

	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
	<!-- jQuery y plugin HSIMP -->
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>

	<style type="text/css">



		#passstrength{display:block;font-size:.8em;margin:0px 0 10px;padding:5px 0 5px 11px;width:200px}

		.confirmacion{background:#C6FFD5;border:1px solid green;}
		.negacion{background:#ffcccc;border:1px solid red}
		#span1{
			display:block;font-size:.8em;margin:0px 0 3px;padding:5px 0 5px 8px;width:90px
			
		}
		.form-control{
			width: 440px;
		}
		#span2{
			display:block;font-size:.8em;margin:0px 0 3px;padding:5px 0 5px 11px;width:90px
			
		}




	</style>

</head>

<body>
	<!-- Fixed navbar -->
	<div class="navbar navbar-inverse">
		<div class="container">
			<div class="navbar-header">
				<!-- Button for smallest screens -->
				<a class="navbar-brand" href="index.html"><img src="../assets/images/slides/uptlogo.png" alt="logo UPT" ></a>
				
				<img src="../imagen/itsmtsinletras.jpg" width="100" height="70" alt="logo ITSSMT">
				<button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span></button>
					
					
					
					
				</div>

				<div class="navbar-collapse collapse">
					<ul class="nav navbar-nav pull-right mainNav">
						<li>
							<a href="../index.html">Inició </a></li>
							<li class="active"	>
								<a href="../HTML/registrarusuario.html"><em class="fa fa-user-plus" aria-hidden="true"></em>Registrar Usuarios</a></li>
								<li>
									<a href="../HTML/index.html"><em class="fas fa-sign-in-alt"></em> Iniciar sesión</a></li>


								</ul>
							</div>
							<!--/.nav-collapse -->
						</div>
					</div>
					<!-- /.navbar -->

					<header id="head" class="secondary">
						<div class="container">
							<h1>Registro de Usuarios </h1>
							
						</div>
					</header>


					<!-- container -->

					<div id="courses">
						<section class="container">
							<!--creacion del forulario para el registro de usuario-->

							<form id="formulario"  enctype="multipart/form-data"  >

								<div id="pswd">
									<h4>El nombre de usuario debe tener <strong>3 carácteres</strong> como mínimo :</h4>
									
								</div>
								<label for="username">
									<h3>Nombre de usuario:</h3> </label>
									<input type="text" class="form-control" id="username" name="username"  minlength="3" required>
									<span id="texto"></span>
									
									
									<br>
									<!--cuando nos colocamos en el input de contraseña se muestra la siguientes requerimientos-->
									<div id="pswd_info">
										<h4>La contraseña debería cumplir con los siguientes requerimientos:</h4>
										<ul>
											
											<li id="capital">Al menos debería tener al menos <strong>una letra en mayúsculas</strong></li>
											<li id="capital">Al menos debería tener al menos <strong>una letra en minuscula</strong></li>
											<li id="number">Al menos debería tener al menos <strong>un numero entero</strong></li>
											<li id="length">La contraseña <strong>NO</strong>  debe de llevar<strong> @.,/?¡¿?#$%&</strong> o algun otro caracter especial</li>

											<li id="length">Debería tener <strong>8 carácteres</strong> como mínimo</li>
										</ul>
									</div>
									<label for="password2">
										<h3>Contraseña:</h3> </label>


										<input type="password" name="password2"  class="form-control"  id="password2" pattern="[A-Za-z0-9]{8,15}"  minlength="8" required 
										title="Letras y números. Tamaño mínimo: 8. Tamaño máximo: 12"/>
										<span id="passstrength"></span>
										<div id="pswd"></div>

										<div class="input-group-append">
											<button id="show_password" class="btn btn-primary" type="button" onclick="mostrarPassword()"> 
												<span id="span1" class="fa fa-eye-slash icon"></span> </button>
											</div>




											<label for="password">
												<h3>Vuelve a escribir la contraseña</h3></label>
												<input type="password" minlength="8" pattern="[A-Za-z0-9]{8,15}" class="form-control"  id="password" name="password"  
												title="Letras y números. Tamaño mínimo: 8. Tamaño máximo: 12" />   
												<div id="pswd"></div>

												<div class="input-group-append">
													<button id="show_password" class="btn btn-primary" type="button" onclick="mostrar()"> 
														<span id="span2" class="fa fa-eye-slash icon"></span> </button>
													</div>









													<div class="register-switch">
														<label for="name">
															<h3>Nombre(s)</h3></label>
															<input type="text" class="form-control" id="name" name="name" title="Solo letras mayusculas y minusculas" pattern="[a-zA-ZñÑáéíóúÁÉÍÓÚ\s]+"  placeholder="Tu nombre" required>

															<label for="paternal_surname">
																<h3>Apellido Paterno:</h3></label>
																<input type="text" class="form-control" id="paternal_surname" title="Solo letras mayusculas y minusculas" pattern="[a-zA-ZñÑáéíóúÁÉÍÓÚ\s]+" name="paternal_surname" placeholder="Primer Apellido" required>

																<label for="maternal_surname"><h3>Apellido Materno: </h3></label>
																<input type="text" class="form-control" id="maternal_surname" title="Solo letras mayusculas y minusculas" pattern="[a-zA-ZñÑáéíóúÁÉÍÓÚ\s]+" name="maternal_surname" placeholder="Segundo Apellido" required>

																<label for="is_admin"><h3>Rol: </h3></label> <br/>

																<input type="CheckBox" id="is_admin"  class="form-check-input" name="is_admin" value="1" /><h3 style="display: inline-block; font-size:18px;">Administrador</h3>
																<br>

																<input type="CheckBox" id="is_admin"  class="form-check-input" name="is_admin" value="0" /><h3 style="display: inline-block;font-size:18px; ">Estudiante</h3>
																

																

																
																<br/>
																<label for="key">
																	<h3>Matrícula ó Número de Trabajador:</h3> </label>
																	<input type="text" class="form-control" id="key" name="key" placeholder="Matricula" required>

																	<p class="input-file-wrapper">
																		<label for="image">
																			<h3>Seleccionar foto de perfil</h3></label>
																			<img class="img-thumbnail rounded mx-auto d-block " width="100px" src="../imagen/add.png" alt="Agregar imagen">

											<input type="file" name="image" id="image" accept=".png, .jpg, .jpeg" src="../imagen/add.png" required>



																		</p>
																	</div>

																	<input type="submit" class="btn btn-success" id="Enviar"  value="Registrar usuario ">
																	<div class="go-top-container">
																		<div class="go-top-button">
																			<em style='font-size:24px' class='fas'>▲</em>
																		</div>
																	</div>
																	<!--^▲ꜛ↑ᴧ↑-->

																</form>

															</section>
														</div>
														<!-- /container -->
														<footer id="footer">
															<div class="container">
																<div class="row">
																	<div class="footerbottom">


																		<div class="col-md-4 col-sm-7">


																			<div class="footerwidget">
																				<h4>Contactos</h4>
																				<p>Universidad Politécnica de Tlaxcala Región Poniente</p>
																				<div class="contact-info">
																					<em class="fa fa-map-marker"></em> Dirección: Carr. Federal México - Veracruz Km. 85, Recova, 90240 Tlax., México<br>
																					<em class="fa fa-phone"></em>Teléfono: +52 241 418 8730<br>
																					<em class="fas fa-envelope"></em>Email:información@uptlaxponiente.edu.mx
																					<div class="team-socials">
													<a rel="noopener noreferrer" href="https://web.facebook.com/UniversidadUPTrep/?_rdc=1&_rdr" target="_blank"><em style="color:#3B5998;" class="fab fa-facebook-square"></em></a>
													<a rel="noopener noreferrer" href="https://twitter.com/UPTrepOficial?s=08" target="_blank"><em style="color: #00ACEE;" class="fab fa-twitter-square"></em></a>
													<a rel="noopener noreferrer" href="https://www.instagram.com/universidaduptrep/?igshid=k9bbnvgoqmni" target="_blank"><em style="color:#C13584" class="fab fa-instagram"></em></a>
													
												</div>


																				</div>
																			</div><!-- end widget -->
																		</div>
																		
																		
																		<div class="col-md-4 col-sm-7">


																			<div class="footerwidget">
																				<h2></h2>
																				<h1></h1>
																				<p>TecNM campus San Martín</p>
																				<div class="contact-info">
																					<em class="fa fa-map-marker"></em> Dirección: Camino a la Barranca de Pesos s/n, San Lucas Atoyatenco, 74120 San Martín Texmelucan de Labastida, Pue., México<br>
																					<em class="fa fa-phone"></em> Teléfono: +52 248 111 1132<br>
																					<em class="fas fa-envelope"></em> Email: depto.difusion@itssmt.edu.mx
																					>
																					

												<div class="team-socials">
													<a rel="noopener noreferrer" href="https://web.facebook.com/TecNMSanMartinTexmelucan" target="_blank"><em style="color:#3B5998;" class="fab fa-facebook-square"></em></a>
													<a rel="noopener noreferrer" href="https://twitter.com/TecNMSanMartinT?s=08" target="_blank"><em style="color: #00ACEE;" class="fab fa-twitter-square"></em></a>
													<a rel="noopener noreferrer" href="https://www.instagram.com/tecnm_sanmartin/?igshid=18ll10a9raqods" target="_blank"><em style="color:#C13584" class="fab fa-instagram"></em></a>

												</div>
																					

																					


																				</div>
																			</div><!-- end widget -->
																		</div>




																	</div>
																</div>
																<div class="clear"></div>
																<!--CLEAR FLOATS-->
															</div>
															<div class="footer2">
																<div class="container">
																	<div class="row">

																	<div class="col-md-6 panel">
																		<div class="panel-body">
																			<p class="simplenav">
																				<a href="../index.html">Inició </a>| 
																				<a href="registrarusuario.html"><em class="fa fa-user-plus" aria-hidden="true"></em> Registrar usuarios</a> |
																					
																					<a href="index.html"><em class="fas fa-sign-in-alt"></em> Iniciar sesión</a> |
																				</p>
																			</div>
																		</div>

																		<div class="col-md-6 panel">
																			<div class="panel-body">
																				<p class="text-right">
																					Copyright &copy; 2020. 

																				</p>
																			</div>
																		</div>

																	</div>
																	<!-- /row of panels -->
																</div>
															</div>
														</footer>


														<!-- JavaScript libs are placed at the end of the document so the pages load faster -->
														<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"> </script>
														<script src="http://netdna.bootstrapcdn.com/bootstrap/3.0.0/js/bootstrap.min.js"> </script>
															 <script type="text/javascript" src="../js/subir.js"></script>

													</body>








													<script>
														
														$(document).ready(function() {
	//variables
	var pass1 = $('[name=password2]');
	var pass2 = $('[name=password]');
	var confirmacion = "Las contraseñas si coinciden";
	var longitud = "La contraseña debe estar formada entre 8-10 carácteres (ambos inclusive) La contraseña al menos debería tener una minuscula, una mayuscula y un numero";
	var negacion = "No coinciden las contraseñas";
	var vacio = "La contraseña no puede estar vacía";
	//oculto por defecto el elemento span
	var span = $('<span id="passstrength"></span>').insertAfter(pass2);
	var span2 = $('<span id="passstrength"></span>').insertAfter(pass1);
	
	span.hide();
	//función que comprueba las dos contraseñas
	function coincidePassword(){
		var valor1 = pass1.val();
		var valor2 = pass2.val();
	//muestro el span
	span.show().removeClass();
	span2.show().removeClass();
	//condiciones dentro de la función
	if(valor1 != valor2){
		span.text(negacion).addClass('negacion');	
		span2.text(negacion).addClass('negacion');	
	}
	if(valor1.length==0 || valor1==""){
		span.text(vacio).addClass('negacion');
		span2.text(vacio).addClass('negacion');		
	}
	if(valor1.length<=7 || valor1.length>10){
		span.text(longitud).addClass('negacion');	
		span2.text(longitud).addClass('negacion');
	}
	if(valor1.length>=8 && valor1==valor2){
		span.text(confirmacion).removeClass("negacion").addClass('confirmacion');
		span2.text(confirmacion).removeClass("negacion").addClass('confirmacion');
	}
}
	//ejecuto la función al soltar la tecla
	pass2.keyup(function(){
		coincidePassword();
	});
});
</script>




<script >
	//función que muetras la contraseña 
	function mostrarPassword(){
		var cambio = document.getElementById("password2");
		if(cambio.type == "password"){
			cambio.type = "text";
			$('.icon').removeClass('fa fa-eye-slash').addClass('fa fa-eye');
		}else{
			cambio.type = "password";
			$('.icon').removeClass('fa fa-eye').addClass('fa fa-eye-slash');
		}
	} 
	
	$(document).ready(function () {
	//CheckBox mostrar contraseña
	$('#ShowPassword').click(function () {
		$('#Password').attr('type', $(this).is(':checked') ? 'text' : 'password');
	});
});


	
</script>
<script >
	//función que muetras la contraseña 
	function mostrar(){
		var cambio = document.getElementById("password");
		if(cambio.type == "password"){
			cambio.type = "text";
			$('.icon').removeClass('fa fa-eye-slash').addClass('fa fa-eye');
		}else{
			cambio.type = "password";
			$('.icon').removeClass('fa fa-eye').addClass('fa fa-eye-slash');
		}
	} 
	
	$(document).ready(function () {
	//CheckBox mostrar contraseña
	$('#ShowPassword').click(function () {
		$('#Password').attr('type', $(this).is(':checked') ? 'text' : 'password');
	});
});


	
</script>

<script>


//creamos una funcion con tres variables donde guardamos Expresiones regulares
//para cada tipo de contraseña 
//
$('#password2').keyup(function(e) {
	var negacion = "No coinciden las contraseñas";
	var confirmacion = "Las contraseñas si coinciden";
	var strongRegex = new RegExp("^(?=.{8,})(?=.*[A-Z])(?=.*[a-z])(?=.*[0-9])(?=.*\\W).*$", "g");
	var mediumRegex = new RegExp("^(?=.{7,})(((?=.*[A-Z])(?=.*[a-z]))|((?=.*[A-Z])(?=.*[0-9]))|((?=.*[a-z])(?=.*[0-9]))).*$", "g");
	var enoughRegex = new RegExp("(?=.{6,}).*", "g");
		//si se cumple la condicion correspondiente muetra lo siguiente segun sea el caso  
		if (false == enoughRegex.test($(this).val())) {
			$('#passstrength').html('Más caracteres.');
		} else if (strongRegex.test($(this).val())) {
			$('#passstrength').className = 'ok';
			$('#passstrength').html('Fuerte!');
		} else if (mediumRegex.test($(this).val())) {
			$('#passstrength').className = 'alert';
			$('#passstrength').html('Media!');
		} else {
			$('#passstrength').className = 'error';
			$('#passstrength').html(' La contraseña al menos debería tener una minúscula, una mayúscula y un numero y como minimo 8 caracteres.');
			//$('#passstrength').addClass('negacion');
		}
		return true;
	});

</script>
<script>


//creamos una funcion con tres variables donde guardamos Expresiones regulares
//para cada tipo de contraseña 
//
$('#username').keyup(function(e) {
	var strongRegex = new RegExp("^(?=.{8,})(?=.*[A-Z])(?=.*[a-z])(?=.*[0-9])(?=.*\\W).*$", "g");
	var mediumRegex = new RegExp("^(?=.{7,})(((?=.*[A-Z])(?=.*[a-z]))|((?=.*[A-Z])(?=.*[0-9]))|((?=.*[a-z])(?=.*[0-9]))).*$", "g");
	var enoughRegex = new RegExp("(?=.{6,}).*", "g");
	var pswd = $(this).val();

		//si se cumple la condicion correspondiente muetra lo siguiente segun sea el caso  
		if ( pswd.length <= 2) {
			$('#texto').html('Más caracteres.').css("color","red");
			
		} else {
			$('#texto').className = 'error';
			$('#texto').html('Correcto!').css("color", "green");
		}
		return true;
	});
</script>




<script type="text/javascript">
	$('#Enviar').click(function() {




	});
</script>







<script>
	$(document).ready(function() {

		$('input[type=text]').keyup(function() {
        // set password variable
        var pswd = $(this).val();
        //validate the length
        if ( pswd.length < 2 ) {
        	$('#length').removeClass('valid').addClass('invalid');
        } else {
        	$('#length').removeClass('invalid').addClass('valid');
        }

        //validate letter
        if ( pswd.match(/[A-z]/) ) {
        	$('#letter').removeClass('invalid').addClass('valid');
        } else {
        	$('#letter').removeClass('valid').addClass('invalid');
        }

        //validate capital letter
        if ( pswd.match(/[A-Z]/) ) {
        	$('#capital').removeClass('invalid').addClass('valid');
        } else {
        	$('#capital').removeClass('valid').addClass('invalid');
        }

        //validate number
        if ( pswd.match(/\d/) ) {
        	$('#number').removeClass('invalid').addClass('valid');
        } else {
        	$('#number').removeClass('valid').addClass('invalid');
        }

    }).focus(function() {
    	$('#pswd').show();
    }).blur(function() {
    	$('#pswd').hide();
    });

});
</script>


<script>
	$(document).ready(function() {

		$('input[type=password]').keyup(function() {
        // set password variable
        var pswd = $(this).val();
        //validate the length
        if ( pswd.length < 8 ) {
        	$('#length').removeClass('valid').addClass('invalid');
        } else {
        	$('#length').removeClass('invalid').addClass('valid');
        }

        //validate letter
        if ( pswd.match(/[A-z]/) ) {
        	$('#letter').removeClass('invalid').addClass('valid');
        } else {
        	$('#letter').removeClass('valid').addClass('invalid');
        }

        //validate capital letter
        if ( pswd.match(/[A-Z]/) ) {
        	$('#capital').removeClass('invalid').addClass('valid');
        } else {
        	$('#capital').removeClass('valid').addClass('invalid');
        }

        //validate number
        if ( pswd.match(/\d/) ) {
        	$('#number').removeClass('invalid').addClass('valid');
        } else {
        	$('#number').removeClass('valid').addClass('invalid');
        }

    }).focus(function() {
    	$('#pswd_info').show();
    }).blur(function() {
    	$('#pswd_info').hide();
    });

});
</script>



<script >


	$("#formulario").on('submit', function(e) {
		e.preventDefault();
		$.ajax({
			url: "http://sistemas.smartin.tecnm.mx:443/users/create-user/",// cadena que tine la url a caragr de la API(obligatoria)
			method: "POST",///los datos los somete a procesar un recurso especifico
			data: new FormData(this),   //sereliza el formulario  
			contentType: false,//dice al cliente que tipo de contenido será retornado.
			cache: false,//establece que no guarde la cache en el servidor
			processData: false,//Por defecto, cada objeto que no sea un string y sea pasado de otro documento, sera transformado en cadena. Para evitar que esto pase, este parametro se puede poner en false
			success: (jqHXR, textStatus) => {//contiene el contenido resultante  si la llamada se realiza satisfactoriente
				
				alert(jqHXR.msg);
				

				//se vasean los campos
				$('#username').val('');
				$('#password').val('');
				$('#password2').val('');
				$('#name').val('');
				$('#maternal_surname').val('');
				$('#paternal_surname').val('');
				$('#key').val('');
				$('#image').val('');
				$('#is_admin').val('');
			},

			error: (responseText,responseJSON,response,jqXHR, textStatus, errorThrow) => { //llamamos una funcion de callback  despues de procesar la funcion
				console.log(response);
				console.log(jqXHR);
				console.log(responseJSON);


				
				alert(responseText.responseText);
			
				console.log(responseText);
			}
			
		});
		return false;
	});
//pueba 2 

</script>




</html>

