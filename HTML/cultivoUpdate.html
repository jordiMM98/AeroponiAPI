<!DOCTYPE html>
<html lang="es">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">


	<title>Actualizar información de los cultivos</title>
	<link rel="shortcut icon" href="../imagen/listo.png" type="image/png">
	<link rel="stylesheet" media="screen" href="http://fonts.googleapis.com/css?family=Open+Sans:300,400,700">
	<link rel="stylesheet" href="../assets/css/bootstrap.min.css">
	<link rel="stylesheet" href="../assets/css/font-awesome.min.css">
	<!-- Estilos personalizados para nuestra plantilla -->
	<link rel="stylesheet" href="../assets/css/bootstrap-theme.css" media="screen">
	
	
	<link rel="stylesheet" href="../assets/css/style.css">
	<link rel="stylesheet" href="../css/modal.css">
	<!--font awesome con CDN-->  
	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.12.1/css/all.css" crossorigin="anonymous">  

	

	
	<link rel='stylesheet' id='camera-css'  href='../assets/css/camera.css' type='text/css' media='all'> 
<script src="https://code.iconify.design/1/1.0.7/iconify.min.js"></script>

	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
	
	<script src="../js/modal.js"></script>
	

	
	
	<script src="https://code.jquery.com/jquery-3.5.1.js"></script>
	<script src="../js/formulario-update.js"></script>
	<script src="../js/logout.js"></script>
	<script src="../js/user.js"></script>
	<script src="../js/update_user.js"></script>
	<script src="../js/autoclose.js"></script>
	
	<script src="../js/lista_cultivo.js"></script>
	
	
	
	<style type="text/css">
		#spin{
			animation: spin 1s linear infinite;
		}
		@keyframes spin{
			0%{
				transform: rotate(0deg);
			}
			100%{
				transform: rotate(360deg);
			}
		}
	</style>
</head>


<body>

	<div class="container-fluid bg-success"></div>
	<!-- Barra de navegación fija -->
	<div class="navbar navbar-inverse">
		<div class="container">
			<div class="navbar-header">
				<!-- Botón para pantallas más pequeñas -->
				<a class="navbar-brand" href="index.html"><img src="../assets/images/slides/uptlogo.png" alt="Logo Upt"></a>
				
				<img src="../imagen/itsmtsinletras.jpg" width="100" height="70" alt="logo ITSSMT">
				<button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span></button>
					
					

				</div>

				<div class="navbar-collapse collapse">
					
					<ul class="nav navbar-nav pull-right mainNav">
						<li class="active">
							<a href="../HTML/registrocultivo.html">Registro de cultivo</a></li>
							<li ><a href="../HTML/registrar_fechas.html">registro de fechas</a></li>
							<li>
								<a href="../HTML/aspersion.html">Aspersión</a></li>
								<li><a href="../HTML/monitoreo_dia.html">Monitoreo por Día</a></li>
								<li><a href="../HTML/monitoreo_mes.html">Monitoreo por Mes</a></li>
								<li><a href="../HTML/Reportes.html">Reportes</a></li>

								<li class="dropdown" >
									<a href="#" class="dropdown-toggle" data-toggle="dropdown">Más<strong class="caret"></strong></a>
									<ul class="dropdown-menu">
										<li id="f"><a onclick="document.getElementById('id01').style.display='block'" style="width:auto;"><em class="fas fa-user"> </em> Perfil de usuario</a></li>
										<li id="f"><a href="../HTML/aspersionUpdate.html" style="width:auto;"><em class="iconify" data-icon="mdi:sprinkler-variant" data-inline="false"> </em> 
										Actualizar ciclo de aspersión</a></li>
										<li id="f"><a href="../HTML/cultivoUpdate.html" style="width:auto;"><em  class="iconify" data-icon="carbon:crop-health" data-inline="false"> </em> 
										Actualizar información del cultivo</a></li>

									</span>
											<li id="f"><a href="../HTML/detail-corps.html" style="width:auto;"><em  class="iconify" data-icon="whh:flowerpot" data-inline="false"> </em> 
										Información de los cultivo</a></li>


										<li><a href="../HTML/historial.html"> <em class="fas fa-history"></em> Historial de Actividad </a></li>
										
										<li ><a id='logoutButton'onclick="javascript:$.fn.CookieCompliance.disconsent();"> <em class="fas fa-sign-out-alt"></em> Cerrar Sesión</a></li>
									</ul>
									
								</li>
							</ul>
							
						</div>

						<!--/.nav-collapse -->
					</div>

				</div>
				
				<!-- /.navbar -->
				
				

				<header id="head" class="secondary">
					<div class="container" style="margin-bottom: 20px;">
						<h1>Actualizar información de los cultivos</h1>
						
					</div>
				</header>

				
				<!---Modal que contienela informacion del usuario-->
				<div id="id01" class="modal">
					<form class="modal-content animate " id="modalf" enctype="multipart/form-data">
						<div class="imgcontainer">
							<span onclick="document.getElementById('id01').style.display='none'" class="close" title="Close Modal">&times;</span>

						</div>

						<div class="content" id="id01" class="modal">
							<div class="container-fluid">
								<div class="row">
									<div class="col-md-6">
										<div class="card">
											<div class="card-header">
												<h3 class="card-title">Actualizar información del usuario</h3>
											</div>
											<div class="card-body">
												
												<div class="row">
													<div class="col-md-6 pr-1">
														<div class="form-group" id="name">
															<label>Nombre:(s)</label>
															<input type="text" id="name" pattern="[a-zA-ZñÑáéíóúÁÉÍÓÚ\s]+" name="name" class="form-control" required>

														</div>
													</div>



													<div class="col-md-6 pr-1">
														<div class="form-group" id="name">
															<label>Matrícula ó Número de Trabajador</label>
															<input type="text" class="form-control" id="key" name="key" required>

														</div>
													</div>  
												</div>



												<div class="row">
													<div class="col-md-6 pr-1">
														<div class="form-group">
															<label>Apellido Paterno:</label>
															<input type="text" pattern="[a-zA-ZñÑáéíóúÁÉÍÓÚ\s]+" id="paternal_surname" name="paternal_surname" class="form-control" required>
														</div>
													</div>

													<div class="col-md-6 pl-1">
														<div class="form-group">
															<label>Apellido Materno:</label>
															<input type="text" pattern="[a-zA-ZñÑáéíóúÁÉÍÓÚ\s]+" id="maternal_surname" name="maternal_surname" class="form-control" required>
														</div>
													</div>
												</div>
												<label> <h4>Actualizar foto de perfil</h4></label>
												<img class="img-thumbnail rounded mx-auto d-block " width="100px" src="../imagen/add.png" alt="Agregar imagen">

												<input type="file" name="image" id="image" accept=".png, .jpg, .jpeg" src="../imagen/add.png" required>

												<br/>

												

												<button type="submit" id="actualizar_user" class="btn btn-info "><em class=" fas fa-user-edit"></em>Actualizar Datos</button>
												
												<button type="reset"  id="re"  class="btn btn-warning" value="Restaurar formualario">
													<em class="fas fa-trash"></em> Restaurar formulario</button>




													<div class="clearfix"></div>
													
												</div>
											</div>
										</div>
										<div class="col-md-6">
											<div class="card card-user">
												<div class="card-image">
													
												</div>
												<div class="card-body" id="div">
													<div class="author">
														
														<p class="description">
															<DIV ALIGN=center><h3 class="card-title">Información del usuario</h3></DIV>

														</p>
														<hr>
														<h3><span class="loading"><em id="spin" class="fas fa-sync"></em> Cargando...</span></h3>

													</div>
													<p class="description text-center">

													</p>


												</div>
												
												<button  type="button" class="btn btn-primary" id="backup"><em class="fas fa-cloud-download-alt"></em> Realizar respaldo </button>
												
												
												<button type="button" class="btn btn-primary" id="restore" > <em class="fas fa-redo"></em> Restaurar respaldo</button>
												
												
												
												
												
												
											</div>
										</div>
									</div>
								</div>
							</div>
						</form>
						
					</div>



					<div class="go-top-container">
						<div class="go-top-button">
							<em style='font-size:24px' class='fas'>▲</em>
							
						</div>
					</div>
					<!--^▲ꜛ↑ᴧ↑-->
					

					

					<div id="courses">
						<section class="container">
							<form id="formulario" enctype="multipart/form-data">

								<div class="col-md-11">
									
										<div class="featured-box" style="margin-bottom: -28px;">
											<div class="text" >
												<h3><label for="name_crop"><h3 style="color:#484848;">Seleccione el cultivo</h3></label>
													
													<select class="caja" style="width:200px;" name="crop_id" id="id" required>
														<option label="Seleccione un cultivo" selected disabled></option>
														

													</select></h3>
													

												</div>
											</div>
										</div>
												
								<div class="col-md-11">
									<div class="featured-box">
										<div class="text">
											<h3>Nombre del cultivo:</h3>
											<input style="max-width: 500px;" type="text" class="form-control" id="name_crop" name="name_crop" step="any"   title="Solo letras pueden ser utilizadas mayúsculas y minúsculas. " placeholder="Ingrese el nombe del cultivo" required></input>
										</div>
									</div>
								</div>

								<div class="col-md-2">
									<div class="featured-box">
										<div class="text">
											<h3>pH</h3>
										</div>
									</div>
								</div>
								<div class="row">
									<div class="col-md-3">
										<div class="featured-box">
											<div class="text">
												<h3>Mínimo</h3>
												<input type="number" class="form-control" id="minimum_ph" name="minimum_ph" step="any" required ></input>
											</div>
										</div>
									</div>
									<div class="col-md-3">
										<div class="featured-box">
											<div class="text">
												<h3>Óptimo</h3>
												<input type="number" class="form-control" id="optimum_ph" name="optimum" step="any" required ></input>


											</div>
										</div>
									</div>
									<div class="col-md-3">
										<div class="featured-box">
											<div class="text">
												<h3>Máximo</h3>
												<input type="number" class="form-control" id="maximum_ph" name="maximum" step="any"required ></input>
											</div>
										</div>
									</div>
								</div>


								<div class="col-md-2">
									<div class="featured-box">
										<div class="text">
											
											<h3>Condutividad electrica dSm<sup>-1</sup> </h3>

										</div>
									</div>
								</div>
								<div class="row">
									<div class="col-md-3">
										<div class="featured-box">
											<div class="text">
												<h3>Mínimo</h3>
												<input type="number" class="form-control" id="minimum_conductividad" name="minimum" step="any" required ></input>
											</div>
										</div>
									</div>
									<div class="col-md-3">
										<div class="featured-box">
											<div class="text">
												<h3>Óptimo</h3>
												<input type="number" class="form-control" id="optimum_conductividad" name="optimum" step="any" required ></input>


											</div>
										</div>
									</div>
									<div class="col-md-3">
										<div class="featured-box">
											<div class="text">
												<h3>Máximo</h3>
												<input type="number" class="form-control" id="maximum_conductividad" name="maximum" step="any" required ></input>
											</div>
										</div>
									</div>
								</div>
								
								<div class="col-md-2">
									<div class="featured-box">
										<div class="text">
											<h3>Humedad </h3>
										</div>
									</div>
								</div>
								
								<div class="col-md-9">
									<div class="featured-box">
										<div class="text">
											<h3> %</h3>
											<input type="number" class="form-control" id="humidity" name="humidity" required></input>
										</div>
									</div>
								</div>

								
								<div class="col-md-2">
									<div class="featured-box">
										<div class="text">
											<h3>Temperatura °C</h3>

										</div>
									</div>
								</div>
								<div class="row">
									<div class="col-md-3">
										<div class="featured-box">
											<div class="text">
												<h3>Mínimo</h3>
												<input type="number" class="form-control" id="minimo_temperature" name="minimum" step="any" required></input>
											</div>
										</div>
									</div>
									<div class="col-md-3">
										<div class="featured-box">
											<div class="text">
												<h3>Óptimo</h3>
												<input type="number" class="form-control" id="optimum_temperature" name="optimum" step="any" required></input>


											</div>
										</div>
									</div>
									<div class="col-md-3">
										<div class="featured-box">
											<div class="text">
												<h3>Máximo</h3>
												<input type="number" class="form-control" id="maximum_temperature" name="maximum" step="any" required ></input>
											</div>
										</div>
									</div>
								</div>
								



												

												

												<button type="submit" id="culti" class="btn btn-success"><em class=" fas fa-edit" ></em>Actualizar Cultivo</button>
												
												<button type="reset" id="r" class="btn btn-danger" value="Restaurar formualario">
													<em class="fas fa-trash"></em> Restaurar formulario</button>
								
								
								
								
								
								
							</form>
						</section>
					</div>

					
					
					




					<!-- /container -->
					<footer id="footer">

						<div class="container">
							<div class="row">
								<div class="footerbottom">


									<div class="col-md-4 col-sm-7">


										<div class="footerwidget" >
											<h4>Contactos</h4>
											<p>Universidad Politécnica de Tlaxcala Región Poniente</p>
											<div class="contact-info">
												<em class="fa fa-map-marker"></em> Dirección: Carr. Federal México - Veracruz Km. 85, Recova, 90240 Tlax., México<br>
												<em class="fa fa-phone"></em>Teléfono: +52 241 418 8730<br>
												<em class="fas fa-envelope"></em>Email:información@uptlaxponiente.edu.mx
												<div class="team-socials">
													<a rel="noopener noreferrer" href="https://web.facebook.com/UniversidadUPTrep/?_rdc=1&_rdr" target="_blank"><em style="color:#3B5998;" class="fab fa-facebook-square"></em></a>
													<a rel="noopener noreferrer" href="https://twitter.com/UPTrepOficial?s=08" target="_blank"><em style="color: #00ACEE;" class="fab fa-twitter-square"></em></a>
													<a rel="noopener noreferrer" href="https://www.instagram.com/universidaduptrep/?igshid=k9bbnvgoqmni" target="_blank"><em style="color:#C13584" class="fab fa-instagram-square"></em></a>
													
												</div>



											</div>
										</div><!-- end widget -->
									</div>
									
									
									<div class="col-md-4 col-sm-7">


										<div class="footerwidget">
											<h2></h2>
											<h1></h1>
											<p>TecNM campus San Martín</p>
											<div class="contact-info">
												<em class="fa fa-map-marker"></em> Dirección: Camino a la Barranca de Pesos s/n, San Lucas Atoyatenco, 74120 San Martín Texmelucan de Labastida, Pue., México<br>
												<em class="fa fa-phone"> </em> Teléfono: +52 248 111 1132<br>
												<em class="fas fa-envelope"></em> Email: depto.difusion@itssmt.edu.mx
												
												<div class="team-socials">
													<a rel="noopener noreferrer" href="https://web.facebook.com/TecNMSanMartinTexmelucan" target="_blank"><em style="color:#3B5998;" class="fab fa-facebook-square"></em></a>
													<a rel="noopener noreferrer" href="https://twitter.com/TecNMSanMartinT?s=08" target="_blank"><em style="color: #00ACEE;" class="fab fa-twitter-square"></em></a>
													<a rel="noopener noreferrer" href="https://www.instagram.com/tecnm_sanmartin/?igshid=18ll10a9raqods" target="_blank"><em style="color:#C13584" class="fab fa-instagram-square"></em></a>

												</div>
												

												


											</div>
										</div><!-- end widget -->
									</div>




								</div>
							</div>


							<div class="clear"></div>
							<!--CLEAR FLOATS-->
						</div>
						<div class="footer2">
							<div class="container">
								<div class="row">

									<div class="col-md-6 panel">
										<div class="panel-body">
											<p class="simplenav">
												
												<a href="../HTML/registrocultivo.html">Registro de cultivos</a> |
												<a href="../HTML/registrar_fechas.html">Registro de fechas</a> |
												<a href="../HTML/aspersion.html">Aspersión</a> |
												<a href="../HTML/monitoreo_dia.html">Monitoreo por día</a>| <br>
												<a href="../HTML/monitoreo_mes.html">Monitoreo por mes</a> |
												<a href="../HTML/Reportes.html">Reportes</a>
												

												
												
											</p>
										</div>
									</div>

									<div class="col-md-6 panel">
										<div class="panel-body">
											<p class="text-right">
												Copyright &copy; 2020. 
												
											</p>
										</div>
									</div>

								</div>
								<!-- /row of panels -->
							</div>
						</div>
					</footer>




					<!-- JavaScript libs are placed at the end of the document so the pages load faster -->
					<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"> </script>
					<script src="http://netdna.bootstrapcdn.com/bootstrap/3.0.0/js/bootstrap.min.js"> </script>
					

					<script src="//code.jquery.com/jquery-latest.min.js"></script>
					<script src="//norfipc.com/js/jquery.cookie.js"></script>
					<script src="//norfipc.com/js/cookiecompliance.js"></script>
					<script type="text/javascript" src="../js/subir.js"></script>
					
					<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
					<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jquery-confirm/3.3.0/jquery-confirm.min.css">
					<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-confirm/3.3.0/jquery-confirm.min.js"></script>

					


				</body>

				</html>
				
				
				



				<!--backups-->
				<script type="text/javascript">
					$('#backup').click(function() {
						
						
						
						$.ajax({
							type:"GET",
							cache:false,
							headers:{"Authorization": "Token "+document.cookie},

							
							url: 'http://sistemas.smartin.tecnm.mx:443/users/backup/' ,
							success: function(response, responseText) {
								
								console.log(response);
								alert(response.msg);
							},
							error: function(response, textstatus, errorThrow){
								
								alert(response.responseText);
							}

						});
						return false;
					});



				</script>

				<script type="text/javascript">
					$('#restore').click(function() {
						
						
						$.ajax({
							type:"GET",
							headers:{"Authorization": "Token "+document.cookie},
							url: 'http://sistemas.smartin.tecnm.mx:443/users/restore/',
							success: function(response, responseText){
								
								console.log(response);
								
								alert(response.msg);
							},
							error: function(response, textstatus, errorThrow){
								
								alert(response.responseText);
								
								
							}

						});
						return false;
					});
				</script>
				

<script type="text/javascript">
	/*
	$(document).ready(function(){
		$("#crop_id").click(function() {

				
			var id = $('#crop_id').val();
			

			console.log(id);
		$.ajax({
			headers:{"Authorization": "Token "+document.cookie},
			url: 'http://sistemas.smartin.tecnm.mx:443/crops/detail/crop/'+id+'/' ,
			DataType:"json",
			success: function(data, responseText) {
				console.log(data);
				$('#name_crop').val(data.name_crop).css("fontWeight","bold").css("fontSize","18px");

				$('#minimum_ph').val(data.ph.minimum).css("fontWeight","bold").css("fontSize","18px");
                $('#optimum_ph').val(data.ph.optimum).css("fontWeight","bold").css("fontSize","18px");
                $('#maximum_ph').val(data.ph.maximum).css("fontWeight","bold").css("fontSize","18px");
                
                $('#minimum_conductividad').val(data.electric_conductivity.minimum).css("fontWeight","bold").css("fontSize","18px");
                $('#optimum_conductividad').val(data.electric_conductivity.optimum).css("fontWeight","bold").css("fontSize","18px");
                $('#maximum_conductividad').val(data.electric_conductivity.maximum).css("fontWeight","bold").css("fontSize","18px");
				
				 $('#humidity').val(data.humidity).css("fontWeight","bold").css("fontSize","18px");

				$('#minimo_temperature').val(data.temperature.minimum).css("fontWeight","bold").css("fontSize","18px");
                $('#optimum_temperature').val(data.temperature.optimum).css("fontWeight","bold").css("fontSize","18px");
                $('#maximum_temperature').val(data.temperature.maximum).css("fontWeight","bold").css("fontSize","18px");




                $("#modalcul").on('submit', function(e) {

        e.preventDefault();
        var id =data.id;

        console.log(id);

						var nombre_cultivo = document.getElementById("name_crop").value;
						var mimnimo_ph = document.getElementById('minimum_ph').value;
						var mph = (parseFloat(mimnimo_ph));
						var optimum_ph = document.getElementById("optimum_ph").value;
						var op_ph = (parseFloat(optimum_ph));
						var maximum_ph = document.getElementById("maximum_ph").value;
						var mx_ph = (parseFloat(maximum_ph));
						var minimum_conductividad = document.getElementById("minimum_conductividad").value;
						var mic = (parseFloat(minimum_conductividad));
						var optimum_conductividad = document.getElementById("optimum_conductividad").value;
						var oc = (parseFloat(optimum_conductividad));
						var maximum_conductividad = document.getElementById("maximum_conductividad").value;
						var mc = (parseFloat(maximum_conductividad));
						var humidity = document.getElementById("humidity").value;
						var hm =(parseInt(humidity));
						var minimo_temperature = document.getElementById("minimo_temperature").value;
						var mit = (parseInt(minimo_temperature));
						var optimum_temperature = document.getElementById("optimum_temperature").value;
						var ot = (parseInt(optimum_temperature));
						var maximum_temperature= document.getElementById("maximum_temperature").value;
						var mt = (parseInt(maximum_temperature));

						
						var nuevocultivo = {
							name_crop: nombre_cultivo,

							ph:{ 
								minimum: mph, 
								optimum:op_ph ,
								maximum:mx_ph
							},

							electric_conductivity:{
								minimum: mic,
								optimum:oc,
								maximum:mc
							},
							
							temperature:{
								minimum:mit,
								optimum:ot,
								maximum:mt
							}	,
							humidity: hm
						};

						var myjson = JSON.stringify(nuevocultivo);
					console.log(id);
						$.ajax({
							headers:{"Authorization": "Token "+document.cookie},
           url: 'http://sistemas.smartin.tecnm.mx:443/crops/update-crop/'+id+'/' ,// cadena que tine la url a caragr de la API(obligatoria)
           method: "PUT",///los datos los somete a procesar un recurso especifico
           data: myjson, //sereliza el formulario  
           dataType:"json",
           contentType:"application/json; charset=utf-8",
           cache:false,//establece que no guarde la cache en el servidor
           processData: false,//Por defecto, cada objeto que no sea un string y sea pasado de otro documento, sera transformado en cadena. Para evitar que esto pase, este parametro se puede poner en false

           success: (jqXHR, textStatus) => {//contiene el contenido resultante  si la llamada se realiza satisfactoriente
           	
           	alert("Cutivo actualizado correctamente");
           	console.log(jqXHR);
           	$('#name_crop').val(jqXHR.name_crop).css("color","#5CB85C").css("fontWeight","bold").css("fontSize","18px");
           	$('#minimum_ph').val(jqXHR.ph.minimum).css("color","#5CB85C").css("fontWeight","bold").css("fontSize","18px");
           	$('#optimum_ph').val(jqXHR.ph.optimum).css("color","#5CB85C").css("fontWeight","bold").css("fontSize","18px");
           	$('#maximum_ph').val(jqXHR.ph.maximum).css("color","#5CB85C").css("fontWeight","bold").css("fontSize","18px");
           	$('#minimo_temperature').val(jqXHR.temperature.minimum).css("color","#5CB85C").css("fontWeight","bold").css("fontSize","18px");
           	$('#optimum_temperature').val(jqXHR.temperature.optimum).css("color","#5CB85C").css("fontWeight","bold").css("fontSize","18px");
           	$('#maximum_temperature').val(jqXHR.temperature.maximum).css("color","#5CB85C").css("fontWeight","bold").css("fontSize","18px");
           	$('#humidity').val(jqXHR.humidity).css("color","#5CB85C").css("fontWeight","bold").css("fontSize","18px");
           	$('#minimum_conductividad').val(jqXHR.electric_conductivity.minimum).css("color","#5CB85C").css("fontWeight","bold").css("fontSize","18px");
           	$('#optimum_conductividad').val(jqXHR.electric_conductivity.optimum).css("color","#5CB85C").css("fontWeight","bold").css("fontSize","18px");
           	$('#maximum_conductividad').val(jqXHR.electric_conductivity.maximum).css("color","#5CB85C").css("fontWeight","bold").css("fontSize","18px");
           	
           },
           
           error: (response,jqXHR,responseText, textStatus, errorThrow) => { //llamamos una funcion de callback  despues de procesar la funcion
           	console.log(jqXHR.responseText);
           	console.log(responseText.responseText);
           	console.log(response);	
           	console.log(textStatus);
           		console.log(errorThrow);
           
           	
           	
           	

           }
       });
						
					});
					

				},
				

				});	});

				});
				*/
</script>
<script type="text/javascript">
	$(document).ready(function(){
		$("#id").on("change",function() {

				
			//var id_crop = $('#id').val();
			var id_crop = document.getElementById("id").value;

			console.log(id_crop);
		$.ajax({
			headers:{"Authorization": "Token "+document.cookie},
			url: 'http://sistemas.smartin.tecnm.mx:443/crops/detail/crop/'+id_crop+'/' ,
			DataType:"json",
			success: function(data, responseText) {
				console.log(data);
				$('#name_crop').val(data.name_crop).css("fontWeight","bold").css("fontSize","18px");

				$('#minimum_ph').val(data.ph.minimum).css("fontWeight","bold").css("fontSize","18px");
                $('#optimum_ph').val(data.ph.optimum).css("fontWeight","bold").css("fontSize","18px");
                $('#maximum_ph').val(data.ph.maximum).css("fontWeight","bold").css("fontSize","18px");
                
                $('#minimum_conductividad').val(data.electric_conductivity.minimum).css("fontWeight","bold").css("fontSize","18px");
                $('#optimum_conductividad').val(data.electric_conductivity.optimum).css("fontWeight","bold").css("fontSize","18px");
                $('#maximum_conductividad').val(data.electric_conductivity.maximum).css("fontWeight","bold").css("fontSize","18px");
				
				 $('#humidity').val(data.humidity).css("fontWeight","bold").css("fontSize","18px");

				$('#minimo_temperature').val(data.temperature.minimum).css("fontWeight","bold").css("fontSize","18px");
                $('#optimum_temperature').val(data.temperature.optimum).css("fontWeight","bold").css("fontSize","18px");
                $('#maximum_temperature').val(data.temperature.maximum).css("fontWeight","bold").css("fontSize","18px");




                $("#culti").click( function(e) {


            e.preventDefault();
        

        console.log("aca se cambia a  "+ id_crop);

						var nombre_cultivo = document.getElementById("name_crop").value;
						var mimnimo_ph = document.getElementById('minimum_ph').value;
						var mph = (parseFloat(mimnimo_ph));
						var optimum_ph = document.getElementById("optimum_ph").value;
						var op_ph = (parseFloat(optimum_ph));
						var maximum_ph = document.getElementById("maximum_ph").value;
						var mx_ph = (parseFloat(maximum_ph));
						var minimum_conductividad = document.getElementById("minimum_conductividad").value;
						var mic = (parseFloat(minimum_conductividad));
						var optimum_conductividad = document.getElementById("optimum_conductividad").value;
						var oc = (parseFloat(optimum_conductividad));
						var maximum_conductividad = document.getElementById("maximum_conductividad").value;
						var mc = (parseFloat(maximum_conductividad));
						var humidity = document.getElementById("humidity").value;
						var hm =(parseInt(humidity));
						var minimo_temperature = document.getElementById("minimo_temperature").value;
						var mit = (parseInt(minimo_temperature));
						var optimum_temperature = document.getElementById("optimum_temperature").value;
						var ot = (parseInt(optimum_temperature));
						var maximum_temperature= document.getElementById("maximum_temperature").value;
						var mt = (parseInt(maximum_temperature));

						
						var nuevocultivo = {
							name_crop: nombre_cultivo,

							ph:{ 
								minimum: mph, 
								optimum:op_ph ,
								maximum:mx_ph
							},

							electric_conductivity:{
								minimum: mic,
								optimum:oc,
								maximum:mc
							},
							
							temperature:{
								minimum:mit,
								optimum:ot,
								maximum:mt
							}	,
							humidity: hm
						};

						var myjson = JSON.stringify(nuevocultivo);
					
					console.log("aca se cambia a 1 "+ id_crop);
						$.ajax({
							headers:{"Authorization": "Token "+document.cookie},
           url: 'http://sistemas.smartin.tecnm.mx:443/crops/update-crop/'+id_crop+'/' ,// cadena que tine la url a caragr de la API(obligatoria)
           method: "PUT",///los datos los somete a procesar un recurso especifico
           data: myjson, //sereliza el formulario  
           dataType:"json",
           contentType:"application/json; charset=utf-8",
           cache:false,//establece que no guarde la cache en el servidor
           processData: false,//Por defecto, cada objeto que no sea un string y sea pasado de otro documento, sera transformado en cadena. Para evitar que esto pase, este parametro se puede poner en false

           success: (jqXHR, textStatus) => {//contiene el contenido resultante  si la llamada se realiza satisfactoriente
           	
          
           	console.log(jqXHR);
           	$('#name_crop').val(jqXHR.name_crop).css("color","green").css("fontWeight","bold").css("fontSize","18px");
           	$('#minimum_ph').val(jqXHR.ph.minimum).css("color","#5CB85C").css("fontWeight","bold").css("fontSize","18px");
           	$('#optimum_ph').val(jqXHR.ph.optimum).css("color","#5CB85C").css("fontWeight","bold").css("fontSize","18px");
           	$('#maximum_ph').val(jqXHR.ph.maximum).css("color","#5CB85C").css("fontWeight","bold").css("fontSize","18px");
           	$('#minimo_temperature').val(jqXHR.temperature.minimum).css("color","#5CB85C").css("fontWeight","bold").css("fontSize","18px");
           	$('#optimum_temperature').val(jqXHR.temperature.optimum).css("color","#5CB85C").css("fontWeight","bold").css("fontSize","18px");
           	$('#maximum_temperature').val(jqXHR.temperature.maximum).css("color","#5CB85C").css("fontWeight","bold").css("fontSize","18px");
           	$('#humidity').val(jqXHR.humidity).css("color","#5CB85C").css("fontWeight","bold").css("fontSize","18px");
           	$('#minimum_conductividad').val(jqXHR.electric_conductivity.minimum).css("color","#5CB85C").css("fontWeight","bold").css("fontSize","18px");
           	$('#optimum_conductividad').val(jqXHR.electric_conductivity.optimum).css("color","#5CB85C").css("fontWeight","bold").css("fontSize","18px");
           	$('#maximum_conductividad').val(jqXHR.electric_conductivity.maximum).css("color","#5CB85C").css("fontWeight","bold").css("fontSize","18px");
           	 	alert("Cultivo actualizado correctamente");
           	window.location.href = window.location;
           	
           },
           
           error: (response,jqXHR,responseText, textStatus, errorThrow) => { //llamamos una funcion de callback  despues de procesar la funcion
           	console.log(response);

           	
           

           }
       });
						
					});
					

				},
				

				});	});

				});

</script>